<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MORSE SIGNAL :: Real-time Communication</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-black text-green-400 font-mono overflow-hidden">
    <div class="container mx-auto h-screen flex flex-col p-2 sm:p-4">
        <div class="border-b border-gray-600 pb-2 mb-2 sm:mb-4">
            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-2 sm:space-y-0">
                <div class="flex items-center space-x-2 sm:space-x-4">
                    <h1 class="text-lg sm:text-xl font-bold">MORSE SIGNAL</h1>
                    <div id="connection-status" class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                        <span class="text-xs sm:text-sm">DISCONNECTED</span>
                    </div>
                </div>
                <div class="flex items-center space-x-2 sm:space-x-4 text-xs sm:text-sm">
                    <div id="room-info">
                        <span>ROOM: </span>
                        <span id="room-id" class="font-bold">---</span>
                    </div>
                    <div id="user-count" class="flex items-center space-x-1">
                        <div class="w-1.5 h-1.5 bg-green-400 rounded-full"></div>
                        <span>1</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="mb-4 sm:mb-6">
            <div class="flex items-center space-x-2 mb-1 sm:mb-2">
                <span class="text-xs sm:text-sm">SIGNAL MONITOR</span>
                <div id="signal-wave" class="flex-1 h-3 sm:h-4 bg-gray-900 rounded relative overflow-hidden">
                    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-green-400 to-transparent opacity-0" id="waveform"></div>
                </div>
            </div>
        </div>

        <div class="flex-1 min-h-0 grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6">
            <div class="border border-gray-700 rounded p-3 sm:p-4 flex flex-col min-h-0">
                <div class="flex items-center justify-between mb-2 sm:mb-3 flex-shrink-0">
                    <h2 class="text-xs sm:text-sm font-semibold">> TRANSMISSION LOG</h2>
                    <div class="flex space-x-1 sm:space-x-2">
                        <button id="clear-log" class="text-xs px-2 py-1 border border-gray-600 hover:border-gray-400 transition-colors">
                            CLEAR
                        </button>
                    </div>
                </div>
                <div id="transmission-log" class="flex-1 min-h-0 overflow-y-auto space-y-1 sm:space-y-2 text-xs sm:text-sm">
                    <div class="text-gray-500">>> Waiting for signal transmission...</div>
                </div>
            </div>

            <div class="border border-gray-700 rounded p-3 sm:p-4 flex flex-col min-h-0">
                <div class="flex items-center justify-between mb-2 sm:mb-3 flex-shrink-0">
                    <h2 class="text-xs sm:text-sm font-semibold">> DECODED TEXT</h2>
                    <div class="flex items-center space-x-2">
                        <span class="text-xs text-gray-500">MODE:</span>
                        <button id="toggle-mode" class="text-xs px-2 py-1 border border-gray-600 hover:border-gray-400 transition-colors">
                            DECODED
                        </button>
                    </div>
                </div>
                <div id="decoded-text" class="flex-1 min-h-0 overflow-y-auto font-medium text-xs sm:text-sm">
                    <div class="text-gray-500">>> No messages decoded yet</div>
                    <div class="blinking-cursor">_</div>
                </div>
            </div>
        </div>

        <div class="border-t border-gray-600 pt-3 sm:pt-4">
            <div class="flex flex-col space-y-3 sm:space-y-4">
                <div class="bg-gray-900 rounded p-2 sm:p-3 border border-gray-700">
                    <div class="flex justify-between items-center mb-1 sm:mb-2">
                        <span class="text-xs text-gray-400">CURRENT MESSAGE</span>
                        <div class="flex space-x-1 sm:space-x-2">
                            <button id="backspace-btn" class="text-xs px-2 py-1 border border-gray-600 hover:border-gray-400 transition-colors">
                                ⌫ BACKSPACE
                            </button>
                            <button id="clear-btn" class="text-xs px-2 py-1 border border-gray-600 hover:border-gray-400 transition-colors">
                                CLEAR
                            </button>
                            <button id="send-btn" class="text-xs px-2 sm:px-3 py-1 bg-green-400 text-black font-semibold hover:bg-green-300 transition-colors">
                                SEND
                            </button>
                        </div>
                    </div>
                    <div class="font-mono text-xs sm:text-sm">
                        <div class="flex flex-col sm:flex-row sm:items-center sm:space-x-4 space-y-1 sm:space-y-0">
                            <div class="flex-1">
                                <span class="text-gray-500">Morse:</span>
                                <span id="current-morse" class="ml-1 sm:ml-2 font-bold">[empty]</span>
                            </div>
                            <div class="flex-1">
                                <span class="text-gray-500">Text:</span>
                                <span id="current-text" class="ml-1 sm:ml-2">[empty]</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex justify-center space-x-2">
                    <button id="letter-space-btn" class="text-xs px-3 py-2 border border-gray-600 hover:border-gray-400 transition-colors">
                        LETTER SPACE [\]
                    </button>
                    <button id="word-space-btn" class="text-xs px-3 py-2 border border-gray-600 hover:border-gray-400 transition-colors">
                        WORD SPACE [/]
                    </button>
                </div>

                <div class="flex flex-col space-y-3 sm:space-y-0 sm:flex-row sm:justify-between sm:items-center">
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4">
                        <button id="transmit-btn"
                                class="px-4 sm:px-6 py-2 sm:py-3 border-2 border-green-400 bg-green-400 bg-opacity-10 hover:bg-opacity-20 transition-all active:scale-95 font-semibold flex items-center justify-center space-x-2">
                            <div class="w-2 sm:w-3 h-2 sm:h-3 bg-green-400 rounded-full"></div>
                            <span class="text-sm sm:text-base">TRANSMIT</span>
                        </button>

                        <div class="flex items-center justify-center space-x-2 text-xs sm:text-sm">
                            <kbd class="px-1 sm:px-2 py-1 border border-gray-600 rounded text-xs">SPACE</kbd>
                            <span class="text-gray-400 text-xs">dot/dash</span>
                            <kbd class="px-1 sm:px-2 py-1 border border-gray-600 rounded text-xs">\</kbd>
                            <span class="text-gray-400 text-xs">letter</span>
                            <kbd class="px-1 sm:px-2 py-1 border border-gray-600 rounded text-xs">/</kbd>
                            <span class="text-gray-400 text-xs">word</span>
                            <kbd class="px-1 sm:px-2 py-1 border border-gray-600 rounded text-xs">⌫</kbd>
                            <span class="text-gray-400 text-xs">backspace</span>
                        </div>
                    </div>

                    <div class="flex space-x-2 sm:space-x-3 justify-center">
                        <button id="copy-link" class="text-xs sm:text-sm px-3 sm:px-4 py-1 sm:py-2 border border-gray-600 hover:border-gray-400 transition-colors">
                            COPY LINK
                        </button>
                        <button id="new-room" class="text-xs sm:text-sm px-3 sm:px-4 py-1 sm:py-2 border border-gray-600 hover:border-gray-400 transition-colors">
                            NEW ROOM
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="connection-modal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4">
            <div class="border border-gray-700 rounded-lg p-4 sm:p-6 max-w-md w-full">
                <h2 class="text-lg sm:text-xl font-bold mb-3 sm:mb-4">ESTABLISH CONNECTION</h2>

                <div class="space-y-3 sm:space-y-4">
                    <div>
                        <label class="block text-sm mb-1 sm:mb-2">OPERATOR NAME</label>
                        <input type="text" id="username-input"
                               class="w-full bg-black border border-gray-600 rounded px-3 py-2 focus:border-green-400 outline-none text-sm"
                               value="OPERATOR_1" maxlength="12">
                    </div>

                    <div>
                        <label class="block text-sm mb-1 sm:mb-2">ROOM ID</label>
                        <div class="flex space-x-2">
                            <input type="text" id="room-input"
                                   class="flex-1 bg-black border border-gray-600 rounded px-3 py-2 focus:border-green-400 outline-none text-sm"
                                   placeholder="Enter room ID">
                            <button id="generate-room" class="px-3 sm:px-4 py-2 border border-gray-600 hover:border-gray-400 transition-colors text-sm">
                                NEW
                            </button>
                        </div>
                    </div>

                    <button id="connect-btn" class="w-full py-2 sm:py-3 border-2 border-green-400 bg-green-400 bg-opacity-10 hover:bg-opacity-20 transition-all font-semibold text-sm sm:text-base">
                        ESTABLISH LINK
                    </button>
                </div>

                <div class="mt-3 sm:mt-4 text-xs text-gray-500">
                    <p>> Two operators can connect using the same Room ID</p>
                    <p>> Communicate using Morse code only</p>
                    <p class="mt-2 text-green-400">>> Keyboard Controls:</p>
                    <p class="text-green-400">SPACE: Short press = dot, Long press = dash</p>
                    <p class="text-green-400">\ : Letter space (between letters)</p>
                    <p class="text-green-400">/ : Word space (between words)</p>
                    <p class="text-green-400">BACKSPACE: Delete last character</p>
                </div>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>
</body>
</html>
